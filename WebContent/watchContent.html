<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Cache-control" content="no-cache">
	<meta http-equiv="Expires" content="-1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>dd tool</title>
	<link href="css/bootstrap.min.css" type="text/css" rel="stylesheet" />
	<link href="css/bootstrap-table.min.css" type="text/css" rel="stylesheet" />
	<link href="css/bootstrap-editable.css" type="text/css" rel="stylesheet" />
	<link href="css/bootstrap-select.min.css" type="text/css" rel="stylesheet" />
	<link href="css/bootstrap-theme.min.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" href="css/bootstrap-tagsinput.css">
	<link href="css/mycss.css" type="text/css" rel="stylesheet" />

</head>
<body>

	<div class="container-fluid" style="margin-top: 10px;">

		<div id="divLoading"></div>
		<div id="Alert"></div>

		<table class="table table-striped fontsize" id="table"></table>

	</div> <!-- container -->



	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/bootstrap-table.min.js"></script>
	<script src="js/bootstrap-editable.js"></script>
	<script src="js/bootstrap-table-editable.js"></script>
	<script src="js/bootstrap-select.min.js"></script>
	<script src="js/bootstrap-list-filter.min.js"></script>
	<script src="js/bootstrap-tagsinput.js"></script>
	<script src="js/bootbox.min.js"></script>
  <script>

    var datas = {
      "result": [
        {
          "MAJPROJ": null,
          "PROJNO": "AD3100",
          "PRSTAFF": 6.5,
          "PROJNAME": "ADMIN SERVICES",
          "RESPEMP": "000010",
          "DEPTNO": "D01",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "AD3100",
          "PROJNO": "AD3110",
          "PRSTAFF": 6,
          "PROJNAME": "GENERAL ADMIN SYSTEMS",
          "RESPEMP": "000070",
          "DEPTNO": "D21",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "AD3110",
          "PROJNO": "AD3111",
          "PRSTAFF": 2,
          "PROJNAME": "PAYROLL PROGRAMMING",
          "RESPEMP": "000230",
          "DEPTNO": "D21",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "AD3110",
          "PROJNO": "AD3112",
          "PRSTAFF": 1,
          "PROJNAME": "PERSONNEL PROGRAMMING",
          "RESPEMP": "000250",
          "DEPTNO": "D21",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "AD3110",
          "PROJNO": "AD3113",
          "PRSTAFF": 2,
          "PROJNAME": "ACCOUNT PROGRAMMING",
          "RESPEMP": "000270",
          "DEPTNO": "D21",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": null,
          "PROJNO": "IF1000",
          "PRSTAFF": 2,
          "PROJNAME": "QUERY SERVICES",
          "RESPEMP": "000030",
          "DEPTNO": "C01",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": null,
          "PROJNO": "IF2000",
          "PRSTAFF": 1,
          "PROJNAME": "USER EDUCATION",
          "RESPEMP": "000030",
          "DEPTNO": "C01",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": null,
          "PROJNO": "MA2100",
          "PRSTAFF": 12,
          "PROJNAME": "WELD LINE AUTOMATION",
          "RESPEMP": "000010",
          "DEPTNO": "D01",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "MA2100",
          "PROJNO": "MA2110",
          "PRSTAFF": 9,
          "PROJNAME": "W L PROGRAMMING",
          "RESPEMP": "000060",
          "DEPTNO": "D11",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "MA2110",
          "PROJNO": "MA2111",
          "PRSTAFF": 2,
          "PROJNAME": "W L PROGRAM DESIGN",
          "RESPEMP": "000220",
          "DEPTNO": "D11",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "1982-12-01"
        },
        {
          "MAJPROJ": "MA2110",
          "PROJNO": "MA2112",
          "PRSTAFF": 3,
          "PROJNAME": "W L ROBOT DESIGN",
          "RESPEMP": "000150",
          "DEPTNO": "D11",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "1982-12-01"
        },
        {
          "MAJPROJ": "MA2110",
          "PROJNO": "MA2113",
          "PRSTAFF": 3,
          "PROJNAME": "W L PROD CONT PROGS",
          "RESPEMP": "000160",
          "DEPTNO": "D11",
          "PRSTDATE": "2002-02-15",
          "PRENDATE": "1982-12-01"
        },
        {
          "MAJPROJ": null,
          "PROJNO": "OP1000",
          "PRSTAFF": 6,
          "PROJNAME": "OPERATION SUPPORT",
          "RESPEMP": "000050",
          "DEPTNO": "E01",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "OP1000",
          "PROJNO": "OP1010",
          "PRSTAFF": 5,
          "PROJNAME": "OPERATION",
          "RESPEMP": "000090",
          "DEPTNO": "E11",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": null,
          "PROJNO": "OP2000",
          "PRSTAFF": 5,
          "PROJNAME": "GEN SYSTEMS SERVICES",
          "RESPEMP": "000050",
          "DEPTNO": "E01",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "OP2000",
          "PROJNO": "OP2010",
          "PRSTAFF": 4,
          "PROJNAME": "SYSTEMS SUPPORT",
          "RESPEMP": "000100",
          "DEPTNO": "E21",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "OP2010",
          "PROJNO": "OP2011",
          "PRSTAFF": 1,
          "PROJNAME": "SCP SYSTEMS SUPPORT",
          "RESPEMP": "000320",
          "DEPTNO": "E21",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "OP2010",
          "PROJNO": "OP2012",
          "PRSTAFF": 1,
          "PROJNAME": "APPLICATIONS SUPPORT",
          "RESPEMP": "000330",
          "DEPTNO": "E21",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "OP2010",
          "PROJNO": "OP2013",
          "PRSTAFF": 1,
          "PROJNAME": "DB/DC SUPPORT",
          "RESPEMP": "000340",
          "DEPTNO": "E21",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2003-02-01"
        },
        {
          "MAJPROJ": "MA2100",
          "PROJNO": "PL2100",
          "PRSTAFF": 1,
          "PROJNAME": "WELD LINE PLANNING",
          "RESPEMP": "000020",
          "DEPTNO": "B01",
          "PRSTDATE": "2002-01-01",
          "PRENDATE": "2002-09-15"
        }
      ],
      "columns": [
        "PROJNO",
        "PROJNAME",
        "DEPTNO",
        "RESPEMP",
        "PRSTAFF",
        "PRSTDATE",
        "PRENDATE",
        "MAJPROJ"
      ],
      "query": "select * from project"
    };


    var cols = [];
    // cols.push({field: "PROJNO", title: "PROJNO"});
		$.each(datas.columns, function(i, column_name){
			var col = {};
			col.field = column_name;
			col.title = column_name;
			col.sortable = true;
			cols.push(col);
		})

    $(document)
    .ready(function() {
      buildTable($('#table'), cols, datas.result);
      Filter();
    })
		.ajaxStart(function(){
		    $("div#divLoading").addClass('show');
		})
		.ajaxStop(function(){
		    $("div#divLoading").removeClass('show');
		});

		$(window).load(function(){

		});

    function Filter(){
			$('#table').bootstrapTable("filterBy", {});
			var datas = $('#table').bootstrapTable("getData");
			console.log(datas);

      var options = $('#table').bootstrapTable('getOptions');
      console.log(options);

      var cols = $('#table').bootstrapTable('getOptions').columns;
      console.log(cols);

    }

    function buildTable($el, cols, datas) {

        $el.bootstrapTable({
            columns: cols,
            // url: "js/projectTable.json",
            data: datas,
            toolbar: null,
            search: true,
						searchOnEnterKey: true,
    				showRefresh: false,
    				showColumns: true,
    				showToggle: false,
    				pagination: true,
						pageSize: 25,
    				showPaginationSwitch: true,
						paginationVAlign: "both",
            detailView: false
        })

        var $tableHeaders = $el.find('thead > tr > th');
        console.log('$tableHeaders');
        console.log($tableHeaders.eq(3));
        var cols = $el.bootstrapTable('getOptions').columns[0];
        console.log(cols);
    }

  </script>

</body>
</html>
